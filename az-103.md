# AZ-103 Microsoft Certified: Azure Administrator Associate – Skills Measured

## Manage Azure subscriptions and resources

----

### Manage Azure subscriptions

* assign administrator permissions
  * [how to transfer billing ownership](https://docs.microsoft.com/en-us/azure/billing/billing-subscription-transfer)
  * [how to associate or add a subscription to your AAD tenant](https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-how-subscriptions-associated-directory)
* configure cost center quotas and tagging
* configure policies at Azure subscription level
  * [How many Azure subscriptions is enough?](https://blogs.technet.microsoft.com/tangent_thoughts/2017/10/17/how-many-azure-subscriptions-is-enough-aka-msazuresubscriptions/)

### Analyze resource utilization and consumption

* configure diagnostic settings on resources
* create baseline for resources
* create and test alerts
  * [Azure Monitor](https://docs.microsoft.com/en-us/azure/azure-monitor/overview)
    * Centralized hub for different Azure Resources Monitoring aspects:
      * Alerts
      * Metrics
      * Log Analytics
      * Service Health
      * Application Insights
      * Network Watcher
* analyze alerts across subscription
* analyze metrics across subscription
* [create action groups](https://docs.microsoft.com/en-us/azure/azure-monitor/platform/action-groups) and action rules
  * Define an Action Type
    * Email / SMS / Push / Voice
    * Function or LogicApps
    * Webhook / Azure Automation
    * ITSM integration
* monitor for unused resources
* monitor spend
  * [Azure Cost Management](https://docs.microsoft.com/en-us/azure/cost-management/overview-cost-mgt)
  * [Cloudyn](https://docs.microsoft.com/en-us/azure/cost-management/overview)
* report on spend
* utilize log queries in Azure Monitor
* view alerts in Azure Monitor

### Manage resource groups

* use Azure policies for resource groups
* configure resource locks
* configure resource policies
* identify auditing requirements
* implement and set tagging on resource groups
* move resources across resource groups
  * Checklist:
    * Common Azure AD Tenant
    * Common resource providers
    * Quotas exceeded?
    * Minimum permissions
    * Limit of 800 moves, possible timeouts
  * Resources you CANNOT move across resource groups:
    * AD Domain Services
    * AD Hybrid Health Service
    * Application Gateway
    * Azure Database for MySQL
    * Azure Database for PostgreSQL
    * Azure Database Migration
    * Azure Databricks
    * Azure Migrate
    * Batch AI
    * Certificates - App Service Certificates can be moved, but uploaded certificates have limitations.
    * Container Instances
    * Container Service
    * Data Box
    * Dev Spaces
    * Dynamics LCS
    * Express Route
    * Kubernetes Service
    * Lab Services – not across subscriptions
    * Load Balancers
    * Managed Applications
    * Managed Disks
    * Microsoft Genomics
    * NetApp
    * Public IP
    * Recovery Services vault
    * SAP HANA on Azure
    * Security
    * Site Recovery
    * StorSimple Device Manager
    * Virtual Networks (classic)
* remove resource groups

### Managed role based access control ([RBAC](https://docs.microsoft.com/en-us/azure/role-based-access-control/overview))

* create a custom role
* configure access to Azure resources by assigning roles
* configure management access to Azure, troubleshoot RBAC, implement RBAC policies, assign RBAC Roles

| role | description |
|----|----|
| Owner | can manager everything, including access |
| Contributor | can manage everything, except access |
| Reader | can view everything, but can't make changes |
| User Access Administrator | lets you manage user access to Azure resources |
| Virtual Machine Contributor | lets you manage virtual machines, but not access to them, and not the virutal network or storage account they're connected to |

**[Access Inheritance](https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/reference/azure-scaffold)**

Subscription ---> Resource Groups ---> Resources

![](scaffoldv2.png)

## Implement and manage storage

----

### Create and configure storage accounts

* [configure network access to the storage account](https://docs.microsoft.com/en-us/azure/virtual-network/tutorial-restrict-network-access-to-resources)
* create and configure storage account
* generate shared access signature
* install and use Azure Storage Explorer
* manage access keys
* monitor activity log by using Monitor Logs
* implement Azure storage replication
  * LRS, ZRS, GRS, GRS-RA
* implement Azure AD authentication

----

| Storage account type | Supported services | Supported performance tiers | Supported access tiers | Replication options | Deployment model | Encryption |
|----|----|----|----|----|----|----|
| General-purpose V2 | Blob, File, Queue, Table, Disk, and Data Lake Gen2 | Standard, Premium | Hot, Cool, Archive | LRS, GRS, RA-GRS, ZRS, GZRS (preview), RA-GZRS (preview)| Resource Manager | Encrypted |
| General-purpose V1 | Blob, File, Queue, Table, and Disk | Standard, Premium  | N/A | LRS, GRS, RA-GRS | Resource Manager, Classic | Encrypted |
| BlockBlobStorage | Blob (block blobs and append blobs only) | Premium | N/A | LRS, ZRS | Resource Manager | Encrypted |
| FileStorage | File only | Premium | N/A | LRS, ZRS | Resource Manager | Encrypted |
| BlobStorage | Blob (block blobs and append blobs only) | Standard | Hot, Cool, Archive | LRS, GRS, RA-GRS | Resource Manager | Encrypted |

----

|Scenario | Locally Redundant Storage (LRS) | Zone-Redundant Storage (ZRS) | Geo-redundant Storage (GRS)/RA-GRS | GZRS/RA-GZRS (preview)|
|----|----|----|----|----|
|Node unavailability within a data center | Yes | Yes | Yes | Yes|
|An entire data center (zonal or non-zonal) becomes unavailable | No | Yes | Yes | Yes|
|A region-wide outage | No | No | Yes | Yes|
|Read access to your data (in a remote, geo-replicated region) in the event of region-wide unavailability | No | No | Yes (with RA-GRS) | Yes (with RA-GZRS)|
|Designed to provide __ durability of objects over a given year1 | at least 99.999999999% (11 9's) | at least 99.9999999999% (12 9's) | at least 99.99999999999999% (16 9's) | at least 99.99999999999999% (16 9's)|
|Supported storage account types2 | GPv2, GPv1, BlockBlobStorage, BlobStorage, FileStorage | GPv2, BlockBlobStorage, FileStorage | GPv2, GPv1, BlobStorage | GPv2|
|Availability SLA for read requests1 | At least 99.9% (99% for cool access tier) | At least 99.9% (99% for cool access tier) | At least 99.9% (99% for cool access tier) for GRS <br/>At least 99.99% (99.9% for cool access tier) for RA-GRS | At least 99.9% (99% for cool access tier) for GZRS <br/> At least 99.99% (99.9% for cool access tier) for RA-GZRS|
|Availability SLA for write requests1 | At least 99.9% (99% for cool access tier) | At least 99.9% (99% for cool access tier) | At least 99.9% (99% for cool access tier) | At least 99.9% (99% for cool access tier)|

----

### Import and export data to Azure

* create export from Azure job
* create import into Azure job
* use Azure Data Box
* configure and use Azure blob storage
* configure [Azure content delivery network (CDN)](https://docs.microsoft.com/en-us/azure/cdn/cdn-overview) endpoints
  * Create a CDN profile
  * Create a new CDN endpoint
  * Wait
    * Microsoft CDN profiles: 10 minutes
    * Akamai CDN profiles: 1 minute
    * Verizon profiles: 90 minutes
  * Know the difference between Standard and Premium tiers

----

* Azure Storage Accounts and Managed Disks
  * Regular data types go to Azure Storage Accounts (blobs)
  * VHD disk upload to Azure Marketplace custom deployments

* Storage Account Explorer
  * GUI or REST API

* Portal, PowerShell, Azure CLI

* Data is more than Azure Storage
  * Databases (SQL, MySQL, CosmosDB, ...)

----

### Configure Azure files

* create Azure file share
* create Azure File Sync service

| Supported on | NOT Supported on |
|----|----|
| Windows Server 2012r2/2016 | Other file systems period |
| NTFS Volumes/Compression | Sysprep
| DFS with 1.2 Agent | NTFS EFS |
| BitLocker, AIP, AAD, RMS | No other HSM |

* create Azure sync group
  * Defines Sync Topology for set of files
* troubleshoot Azure File Sync
  * [What is Azure Files?](https://docs.microsoft.com/en-us/azure/storage/files/storage-files-introduction)
  * [Deploy Azure File Sync](https://docs.microsoft.com/en-us/azure/storage/files/storage-sync-files-deployment-guide?tabs=azure-portal)

### Implement Azure backup

* configure and review backup reports
* perform backup operation
* create Recovery Services Vault
* create and configure backup policy
* perform a restore operation

## Deploy and manage virtual machines (VMs)

----

### Create and configure a VM for Windows and Linux

* configure high availability
* configure monitoring, networking, storage, and virtual machine size
* [deploy and configure scale sets](https://blogs.technet.microsoft.com/tangent_thoughts/2016/08/25/got-vm-scale-sets-aka-msazurevmss/)

### Automate deployment of VMs

* modify Azure Resource Manager (ARM) template
  * JSON files with a predefined syntax and schema
    * parameters
    * variables
    * resources
    * outputs
  * Azure and Azure Stack compatible
  * Deployment from:
    * [Azure Portal / Add Resource / Template Deployment](https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/quickstart-create-templates-use-the-portal?toc=%2Fazure%2Fvirtual-machines%2Fwindows%2Ftoc.json)
    * [PowerShell](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/tutorial-manage-vm?toc=%2Fazure%2Fvirtual-machines%2Fwindows%2Ftoc.json)
    * [Azure CLI](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/quick-create-cli)
  * GitHub -> [Azure QuickStart Templates](https://github.com/Azure/AzureStack-QuickStart-Templates)
  * Visual Studio Code
  * Visual Studio 2015 adn up (all editions)
* configure location of new VMs
* configure VHD template
* deploy from template
* save a deployment as an ARM template
* deploy Windows and Linux VMs

### Manage Azure VM

* add data discs
* add network interfaces
* [automate configuration management by using PowerShell Desired State Configuration (DSC) and VM Agent by using custom script extensions](https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/dsc-template)
* manage VM sizes
* move VMs from one resource group to another
* redeploy VMs
* soft delete for Azure VMs

### Manage VM backups

* configure VM backup
* define backup policies
* implement backup policies
* perform VM restore
* [Azure Site Recovery](https://docs.microsoft.com/en-us/azure/site-recovery/site-recovery-overview)

| Supported | Details |
|----|----|
| Replication scenarios | • Replicate Azure VMs from one Azure region to another. <br/>• Replicate on-premises VMware VMs, Hyper-V VMs, physical servers (Windows and Linux), Azure Stack VMs to Azure.<br/>• Replicate AWS Windows instances to Azure.<br/>• Replicate on-premises VMware VMs, Hyper-V VMs managed by System Center VMM, and physical servers to a secondary site.|
| Regions | Review supported regions for Site Recovery. |
| Replicated machines | Review the replication requirements for Azure VM replication, on-premises VMware VMs and physical servers, and on-premises Hyper-V VMs. |
| Workloads | You can replicate any workload running on a machine that's supported for replication. In addition, the Site Recovery team have performed app-specific testing for a number of apps. |

## Configure and manage virtual networks

----

### Create connectivity between virtual networks

* create and configure [VNET peering](https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview)
  * Benefits
    * Connect 2 VNets in same region
    * Routed through Azure Backbone(= no custom encryption like S2S VPN)
  * Requirements
    * Same Region & Across Regions
    * Non-overlapping IP Addresses
    * No Transitivity
  * Capabilities
    * Open or Close NSGs
    * Internal DNS only within VNet, no Azure DNS across
  * Peering uses the MS Backbone; if you want(custom) additional encryption, use S2S VPN
* create and configure VNET to VNET connections
* verify virtual network connectivity
* create virtual network gateway

### Implement and manage virtual networking

* configure private and public IP addresses, network routes, network interface, subnets, and virtual network

| Public IP | Private IP |
|----|----|
| Separate Azure Object | Allocated from subnet range |
| Public Azure Service | Internal resolution by Azure DNS |
| VMs, ILBs, VPN, App GWs | Subnet, part of VNet range |
| Dynamic (default) or Static | VM, ILBs, App GWs |
| DNS hostname resolution| Dynamic (default) or Static |

### Configure name resolution

* configure Azure DNS
  * Zone
    * Zone name must be unique within resource group
    * Can add Azure tags for billing or grouping
    * Creating the zone makes SOA and NS records in Azure
  * Record
    * Azure DNS supports all common records
    * Use Record Sets for more than one record of the same name and type + wildcard!
    * SOA and CNAME are exceptions to above ^
  * Delegate Domain to Azure DNS
    * Must know zone server names
    * `Get-AzureRmDnsZone -Name contoso.net -ResourceGroupName MyResourceGroup`
* configure custom DNS settings
* configure private and public DNS zones

### Create and configure a Network Security Group (NSG)

* create security rules
  * Apply at subnet or NIC
  * Only 1 NSG per Azure resource
  * Only TCP or UDP
  * Special Rules:
    * Microsoft Owned IP Address: `168.63.129.16`
    * Outbound Port `1688` reserved for KMS
* associate NSG to a subnet or network interface
* identify required ports
* evaluate effective security rules

### Implement Azure load balancer

* configure internal load balancer
  * Private IP address
  * Load balances ALL traffic (TCP, UDP – all ports)
  * Sits behind an external load balancer
  * Cannot combineexternal and internal traffic at the sametime
* configure load balancing rules
* configure public load balancer
  * Internet-facing IP-address
  * Load Balances ALL traffic (TCP, UDP – all ports)
  * Required when deploying Virtual Machine Availability Sets
  * Can communicate with Azure InternalLoad Balancer and/or Application Gateway
  * Cannot combineexternal and internal traffic at the sametime
* troubleshoot load balancing
  * Network Watcher
    * Recently added networking feature, providing:
      * Topology
      * Variable Packet Capture
      * IP Flow Verify
      * Next Hop
      * Diagnostics Logging
      * Security Group View
      * NSG Flow Logging
      * VPN Gateway Troubleshooting
      * Network Subscription Limits
      * Role Based Access Control
      * Connectivity

| BASIC | STANDARD |
|----|----|
| Up to 100 backend instances | Up to 1000 instances |
| Non-zonal frontent | Zone-redundant frontend <br/> Zonal frontend |
| Availability Set (single) | Availability Sets not required |
| Basic NAT and Probe health status | Integrated frontend and backend health metrics |
| no HA ports | Supports HA ports |
| NSG optional | NSG required |
| Free | Charged based on number of rules, data processed inboud and outbound associated with resource |

### Monitor and troubleshoot virtual networking

* monitor on-premises connectivity, use Network resource monitoring, use Network Watcher, troubleshoot external networking, troubleshoot virtual network connectivity

### Integrate on premises network with Azure virtual network

* create and configure Azure VPN Gateway, create and configure site to site VPN, configure Express Route, verify on premises connectivity, troubleshoot on premises connectivity with Azure

## Manage identities

----

### Manage Azure Active Directory (AD)

* add custom domains
* Azure AD Join
  * Requires:
    * Azure AD + Subscription
    * Windows 10 (Pro/Ent)
  * Admin Tasks
  * User Tasks
    * [Register Windows 10 Device – BYOD](https://docs.microsoft.com/en-us/azure/active-directory/user-help/user-help-register-device-on-network)
    * Join Corp Device
      * Settings, Account, Access Work or School
  * Verify
* configure self-service password reset
* manage multiple directories

* Enterprise State Roaming - With Windows 10, Azure Active Directory (Azure AD) users gain the ability to securely synchronize their user settings and application settings data to the cloud. Enterprise State Roaming provides users with a unified experience across their Windows devices and reduces the time needed for configuring a new device. Enterprise State Roaming operates similar to the standard consumer settings sync that was first introduced in Windows 8.
  * Requires:
    * Azure AD Premium
    * Windows 10
    * Azure AD Domain Join
  * 3 regions: NA, EMEA, APAC
  * Not replicated across
  * Country/Regioin set on attribute and cannot be changed after
  * Retained until deleted or becomes "stale"

### Manage Azure AD objects (users, groups, and devices)

* create users and groups
* manage user and group properties
* manage device settings
* perform bulk user updates
  * PowerShell
    * Import a CSV
    * Export from HR or SQL
  * Process
    * Connect-AzureAD (MSonline still works, mainly used for Office 365 integration)
    * Define Variables
* manage guest accounts

### Implement and manage hybrid identities

* [install Azure AD Connect](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-install-custom), including password hash and pass-through synchronization
* use Azure AD Connect to configure federation with on-premises Active Directory Domain Services (AD DS)
* manage Azure AD Connect
* manage password sync and password writeback

| AD Scenario | |
|----|----|
| Cloud-only | • Users and Groups are managed in Azure Active Directory only<br/> • Azure AD stores the password (encrypted) |
| Hybrid AD w/password sync | • On-premises Active Directory is the « master » <br/> • Users and Groups are synchronized to Azure Active Directory using ADConnect (or MIM or 3rd party)<br/> • Password is synced encrypted out of ADConnect (or MIM or 3rd party) |
| Hybrid AD w/Federation | • Relies on ADConnect to synchronize objects<br/> • ADFS or 3rd party Federation engine, running on-premises or in Azure VMs (with S2S or ER)|
| Hybrid AD w/PassThrough Authentication | • Relies on ADConnect to synchronize objects<br/> • Instead of ADFS federation, deploy the PTA agents on on-premises servers (ADDS DCs)|

### Implement multi-factor authentication (MFA)

* configure user accounts for MFA, enable MFA by using bulk update, configure fraud alerts, configure bypass options, configure Trusted IPs, configure verification methods

## Tutorials

https://docs.microsoft.com/en-us/azure/active-directory/hybrid/tutorial-password-hash-sync
https://docs.microsoft.com/en-us/azure/active-directory/devices/hybrid-azuread-join-managed-domains
https://docs.microsoft.com/en-us/azure/virtual-network/tutorial-filter-network-traffic
https://docs.microsoft.com/en-us/azure/dns/dns-delegate-domain-azure-dns
https://docs.microsoft.com/en-us/azure/virtual-network/tutorial-filter-network-traffic
https://docs.microsoft.com/en-us/azure/virtual-network/tutorial-filter-network-traffic
https://docs.microsoft.com/en-us/azure/site-recovery/azure-to-azure-tutorial-enable-replication
https://docs.microsoft.com/en-us/azure/storage/files/storage-sync-files-extend-servers
https://docs.microsoft.com/en-us/azure/storage/files/storage-sync-files-extend-servers
https://docs.microsoft.com/en-us/azure/cdn/cdn-add-to-web-app
https://docs.microsoft.com/en-us/azure/virtual-network/tutorial-restrict-network-access-to-resources
https://docs.microsoft.com/en-us/azure/azure-monitor/learn/tutorial-metrics-explorer
https://docs.microsoft.com/en-us/azure/cost-management/tutorial-acm-create-budgets
https://docs.microsoft.com/en-us/azure/azure-monitor/learn/tutorial-metrics-explorer
https://docs.microsoft.com/en-us/azure/role-based-access-control/quickstart-assign-role-user-portal

## Resources

https://myignite.techcommunity.microsoft.com/sessions/80741
http://duffney.io/AZ103-StudyGuide
